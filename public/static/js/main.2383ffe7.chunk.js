(this.webpackJsonpreact_node_fullstack_front=this.webpackJsonpreact_node_fullstack_front||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/default.e3718657.webp"},28:function(e,t,a){e.exports=a(37)},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),l=a(1),s=a(13),i=a(2),m=a(3),u=a(5),d=a(4),p="http://".concat(window.location.host,"/api"),h=function(e){return fetch("".concat(p,"/post/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},f=function(e,t){return fetch("".concat(p,"/post/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},b=function(e,t,a){return fetch("".concat(p,"/post/like"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},g=function(e,t,a){return fetch("".concat(p,"/post/unlike"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},E=function(e,t,a,n){return fetch("".concat(p,"/post/comment"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a,comment:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},v=function(e,t,a,n){return fetch("".concat(p,"/post/uncomment"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:a,comment:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},N="http://".concat(window.location.host,"/api"),y=function(e){return"undefined"!==typeof window&&localStorage.removeItem("jwt"),e(),fetch("".concat(N,"/signout"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},w=function(){if("undefined"!==typeof window)return!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt"))},j=a(14),S=a.n(j),k=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderPosts=function(e){return r.a.createElement("div",{className:"row"},e.map((function(e,t){var a=e.postedBy?e.postedBy._id:"",n=e.postedBy?e.postedBy.name:"unknown";return r.a.createElement("div",{className:"card col-lg-4 md-12",key:t},r.a.createElement("div",{className:"card-body"},r.a.createElement("img",{src:"".concat(N,"/post/photo/").concat(e._id),alt:e.title,onError:function(e){return e.target.src="".concat(S.a)},className:"img-thumbnail mb-3",style:{height:"200px",width:"auto"}}),r.a.createElement("h5",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},e.body.substring(0,100)),r.a.createElement("br",null),r.a.createElement("p",{className:"font-italic mark"},"Posted by",r.a.createElement(l.b,{to:"/user/".concat(a)}," ",n," "),"on ",new Date(e.created).toDateString()),r.a.createElement(l.b,{to:"/post/".concat(e._id),className:"btn btn-raised btn-sm btn-primary"},"Read More")))})))},n.state={posts:[],error:""},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(p,"/post"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(t){if(t.error)return e.setState({error:t.error});e.setState({posts:t})}))}},{key:"render",value:function(){var e=this.state.posts;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},e.length?"Recent Posts":"Loading..."),this.renderPosts(e))}}]),a}(n.Component),C=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h2",null,"Home"),r.a.createElement("p",{className:"lead"},"Welcome to React Frontend")),r.a.createElement("div",{className:"container"},r.a.createElement(k,null)))},O=function(e,t){return e.location.pathname===t?{color:"#ff9908"}:{color:"#ffffff"}},x=Object(s.g)((function(e){var t=e.history;return r.a.createElement("div",null,r.a.createElement("ul",{className:"nav nav-tabs bg-primary"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/",className:"nav-link",style:O(t,"/")},"Home")),w()?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/post/create",className:"nav-link",style:O(t,"/post/create")},"Create Post")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/findpeople",className:"nav-link",style:O(t,"/findpeople")},"Find People")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/user/".concat(w().user._id),className:"nav-link",style:O(t,"/user/".concat(w().user._id))},"Perfil ".concat(w().user.name))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{className:"nav-link",style:O(t,"/signout"),onClick:function(){return y((function(){return t.push("/")}))}},"Sign Out"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/users",className:"nav-link",style:O(t,"/users")},"Users")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/signin",className:"nav-link",style:O(t,"/signin")},"Sign In")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/signup",className:"nav-link",style:O(t,"/signup")},"Sign Up")))))})),P=a(8),T=a(11),_=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){return function(t){n.setState({error:"",valid:!1}),n.setState(Object(P.a)({},e,t.target.value))}},n.clickSubmit=function(e){e.preventDefault();var t=n.state;(function(e){return fetch("".concat(N,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))})({name:t.name,email:t.email,password:t.password}).then((function(e){e.error?n.setState({error:e.error}):n.setState({name:"",email:"",password:"",error:"",valid:!0})}))},n.state={name:"",email:"",password:"",error:"",valid:!1},n.handleChange=n.handleChange.bind(Object(T.a)(n)),n.clickSubmit=n.clickSubmit.bind(Object(T.a)(n)),n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.password,o=e.error,c=e.valid;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Signup"),r.a.createElement("div",{className:"alert alert-warning",style:{display:o?"block":"none"}},o),r.a.createElement("div",{className:"alert alert-info",style:{display:c?"block":"none"}},"New Account is successfully created. Please ",r.a.createElement(l.b,{to:"/signin"},"Sign In!")),r.a.createElement("form",{onSubmit:this.clickSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:this.handleChange("name"),type:"text",className:"form-control",value:t,autoComplete:"username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:this.handleChange("email"),type:"email",className:"form-control",value:a,autoComplete:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:this.handleChange("password"),type:"password",className:"form-control",value:n,autoComplete:"current-password"})),r.a.createElement("button",{className:"btn btn-raised btn-primary"},"Submit")))}}]),a}(n.Component),A=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){return function(t){n.setState({error:"",valid:!1}),n.setState(Object(P.a)({},e,t.target.value))}},n.clickSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var t=n.state;(function(e){return fetch("".concat(N,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))})({email:t.email,password:t.password}).then((function(e){if(e.error)return n.setState({error:e.error,loading:!1});var t,a;t=e,a=function(){n.setState({redirectToReferer:!0})},"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(t)),a())}))},n.state={email:"",password:"",error:"",redirectToReferer:!1,loading:!1},n.handleChange=n.handleChange.bind(Object(T.a)(n)),n.clickSubmit=n.clickSubmit.bind(Object(T.a)(n)),n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,o=e.redirectToReferer,c=e.loading;return o?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"SignIn"),r.a.createElement("div",{className:"alert alert-warning",style:{display:n?"block":"none"}},n),c?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading")):null,r.a.createElement("form",{onSubmit:this.clickSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:this.handleChange("email"),type:"email",className:"form-control",value:t,autoComplete:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:this.handleChange("password"),type:"password",className:"form-control",value:a,autoComplete:"current-password"})),r.a.createElement("button",{className:"btn btn-raised btn-primary"},"Submit")))}}]),a}(n.Component),I="http://".concat(window.location.host,"/api"),D=function(e,t){return fetch("".concat(I,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},B=function(e,t,a){return fetch("".concat(I,"/user/follow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,followId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},F=function(e,t,a){return fetch("".concat(I,"/user/unfollow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,unfollowId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},z=a(7),U=a.n(z),R=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).deleteAccount=function(){var e=w().message;(function(e,t){return fetch("".concat(I,"/user/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(n.props.userId,e).then((function(e){e.error&&console.log(e.error),y((function(){return console.log("User is deleted!")})),n.setState({redirect:!0})}))},n.deleteConfirmed=function(){return window.confirm("Are you sure?")&&n.deleteAccount(),!1},n.state={redirect:!1},n}return Object(m.a)(a,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(s.a,{to:"/"}):r.a.createElement("input",{type:"button",value:"Delete profile",onClick:this.deleteConfirmed,className:"btn btn-raised btn-danger"})}}]),a}(n.Component),J=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).followClick=function(){e.props.onButtonClick(B)},e.unfollowClick=function(){e.props.onButtonClick(F)},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"d-inline-block mt-5"},this.props.following?r.a.createElement("button",{onClick:this.unfollowClick,className:"btn btn-warning btn-raised mr-5"},"Unfollow"):r.a.createElement("button",{onClick:this.followClick,className:"btn btn-success btn-raised mr-5"},"Follow"))}}]),a}(n.Component),L=a(26),V=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.following,a=e.followers,n=e.posts;return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-primary"},"Followers"),r.a.createElement("hr",null),a.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement(l.b,{to:"/user/".concat(e._id)},r.a.createElement("img",{style:{borderRadius:"100%"},className:"img-thumbnail float-left mr-2",height:"30px",width:"30px",onError:function(e){return e.target.src="".concat(U.a)},src:"".concat(N,"/user/photo/").concat(e._id),alt:e.name}),r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},e.name)))))}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-primary"},"Following"),r.a.createElement("hr",null),t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement(l.b,{to:"/user/".concat(e._id)},r.a.createElement("img",{style:{borderRadius:"100%"},className:"img-thumbnail float-left mr-2",height:"30px",width:"30px",onError:function(e){return e.target.src="".concat(U.a)},src:"".concat(N,"/user/photo/").concat(e._id),alt:e.name}),r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},e.name)))))}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h3",{className:"text-primary"},"Posts"),r.a.createElement("hr",null),Object(L.a)(n).map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",null,r.a.createElement(l.b,{to:"/post/".concat(e._id)},r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},e.title)))))})))))}}]),a}(n.Component),M=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).checkIsFollowing=function(e){var t=w();return e.followers.find((function(e){return e._id===t.user._id}))},n.clickFollowButton=function(e){e(w().user._id,w().message,n.state.user._id).then((function(e){if(e.error)return n.setState({error:e.error});n.setState({user:e.user,following:!n.state.following})}))},n.init=function(e){var t=w().message;D(e,t).then((function(e){if(e.error)return n.setState({redirectToSignin:!0});var a=n.checkIsFollowing(e.user);n.setState({user:e.user,following:a}),n.loadPosts(e.user._id,t)}))},n.loadPosts=function(e,t){(function(e,t){return fetch("".concat(p,"/post/by/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error&&console.log(e.error),n.setState({posts:e})}))},n.state={user:{following:[],followers:[]},redirectToSignin:!1,error:"",posts:"",following:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;this.init(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.userId;this.init(t)}},{key:"render",value:function(){var e=this.state,t=e.redirectToSignin,a=e.user,n=e.posts,o=a._id?"".concat(N,"/user/photo/").concat(a._id,"?").concat((new Date).getTime()):U.a;return t?r.a.createElement(s.a,{to:"/signin"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Profile"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 md-12"},r.a.createElement("img",{style:{height:"200px",width:"auto",borderRadius:"100%"},className:"img-thumbnail",src:o,onError:function(e){return e.target.src="".concat(U.a)},alt:a.name})),r.a.createElement("div",{className:"col-lg-8 md-12"},r.a.createElement("div",{className:"lead"},r.a.createElement("p",null,"Name: ","".concat(this.state.user.name)),r.a.createElement("p",null,"Email: ","".concat(this.state.user.email)),r.a.createElement("p",null,"Joined: ","".concat(new Date(this.state.user.created)))),w().user&&w().user._id===this.state.user._id?r.a.createElement("div",{className:"d-inline-block"},r.a.createElement(l.b,{to:"/post/create",className:"btn btn-raised btn-primary mr-5"},"Create Post"),r.a.createElement(l.b,{to:"/user/edit/".concat(a._id),className:"btn btn-raised btn-success mr-5"},"Edit Profile"),r.a.createElement(R,{userId:a._id})):r.a.createElement(J,{following:this.state.following,onButtonClick:this.clickFollowButton}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col md-12 mt-5 mb-5"},r.a.createElement("hr",null),r.a.createElement("p",{className:"lead"},a.about),r.a.createElement("hr",null),r.a.createElement(V,{followers:a.followers,following:a.following,posts:n}))))}}]),a}(n.Component),G=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderUsers=function(e){return r.a.createElement("div",{className:"row"},e.map((function(e,t){return r.a.createElement("div",{className:"card col-lg-4 md-12",key:t},r.a.createElement("img",{style:{height:"200px",width:"auto"},className:"img-thumbnail",src:"".concat(N,"/user/photo/").concat(e._id,"?").concat((new Date).getTime()),onError:function(e){return e.target.src="".concat(U.a)},alt:e.name}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement("p",{className:"card-text"},e.email),r.a.createElement(l.b,{to:"/user/".concat(e._id),className:"btn btn-raised btn-sm btn-primary"},"View Profile")))})))},n.state={users:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(I,"/user"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(t){t.error&&console.log(t.error),e.setState({users:t})}))}},{key:"render",value:function(){var e=this.state.users;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Users"),this.renderUsers(e))}}]),a}(n.Component),q=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).init=function(e){var t=w().message;D(e,t).then((function(e){if(e.error)return n.setState({redirectToProfile:!0});n.setState({id:e.user._id,name:e.user.name,email:e.user.email,about:e.user.about,error:""})}))},n.isValid=function(){var e=n.state,t=e.name,a=e.email,r=e.password;return e.fileSize>1e4?n.setState({error:"File should be less than 100kb.",loading:!1}):0===t.length?n.setState({error:"Name is required!",loading:!1}):/^\w+([\.-]?w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a)?!(r.length>=1&&r.length<=5)||n.setState({error:"Password must be at least 6 characters long.",loading:!1}):n.setState({error:"A valid Email is required!",loading:!1})},n.handleChange=function(e){return function(t){var a;n.setState({error:""});var r="photo"===e?t.target.files[0]:t.target.value,o="photo"===e?t.target.files[0].size:0;n.userData.set(e,r),n.setState((a={},Object(P.a)(a,e,r),Object(P.a)(a,"fileSize",o),a))}},n.clickSubmit=function(e){e.preventDefault();var t=n.props.match.params.userId,a=w().message;n.setState({loading:!0}),n.isValid()&&function(e,t,a){return fetch("".concat(I,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t,a,n.userData).then((function(e){return e.error?n.setState({error:e.error}):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var a=JSON.parse(localStorage.getItem("jwt"));a.user=e,localStorage.setItem("jwt",JSON.stringify(a)),t()}}(e,(function(){n.setState({redirectToProfile:!0})}))}))},n.editForm=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var o=[].concat(t),c=o[0],l=o[1],s=o[2],i=o[3];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Profile Photo"),r.a.createElement("input",{onChange:n.handleChange("photo"),type:"file",className:"form-control",accept:"image/*"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:n.handleChange("name"),type:"text",className:"form-control",value:c||"",autoComplete:"username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:n.handleChange("email"),type:"email",className:"form-control",value:l||"",autoComplete:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"About"),r.a.createElement("textarea",{onChange:n.handleChange("about"),type:"text",className:"form-control",value:i||""})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:n.handleChange("password"),type:"password",className:"form-control",value:s||"",autoComplete:"current-password"})),r.a.createElement("button",{className:"btn btn-raised btn-primary"},"Update"))},n.state={id:"",name:"",password:"",email:"",error:"",fileSize:"",about:"",redirectToProfile:!1,loading:!1},n.handleChange=n.handleChange.bind(Object(T.a)(n)),n.clickSubmit=n.clickSubmit.bind(Object(T.a)(n)),n.userData=new FormData,n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;this.init(e)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.password,o=e.redirectToProfile,c=e.error,l=e.about,i=e.loading,m=this.props.match.params.userId,u="".concat(N,"/user/photo/").concat(m,"?").concat((new Date).getTime());return o?r.a.createElement(s.a,{to:"/user/".concat(m)}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Edit Profile"),r.a.createElement("form",{onSubmit:this.clickSubmit},r.a.createElement("div",{className:"alert alert-warning",style:{display:c?"block":"none"}},c),i?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):"",r.a.createElement("img",{style:{height:"200px",width:"auto",borderRadius:"100%"},className:"img-thumbnail",src:u,onError:function(e){return e.target.src="".concat(U.a)},alt:t}),this.editForm(t,a,n,l)))}}]),a}(n.Component),H=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).clickFollow=function(e,t){var a=w().user._id,r=w().message;B(a,r,e._id).then((function(a){if(a.error)return n.setState({error:a.error});var r=n.state.users;r.splice(t,1),n.setState({users:r,error:"",open:!0,follow_message:"Following ".concat(e.name)})}))},n.renderUsers=function(e){return r.a.createElement("div",{className:"row"},e.map((function(e,t){return r.a.createElement("div",{className:"card col-lg-4 md-12",key:t},r.a.createElement("img",{style:{height:"200px",width:"auto"},className:"img-thumbnail",src:"".concat(N,"/user/photo/").concat(e._id,"?").concat((new Date).getTime()),onError:function(e){return e.target.src="".concat(U.a)},alt:e.name}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement("p",{className:"card-text"},e.email),r.a.createElement(l.b,{to:"/user/".concat(e._id),className:"btn btn-raised btn-sm btn-primary"},"View Profile"),r.a.createElement("button",{onClick:function(){return n.clickFollow(e,t)},className:"btn btn-raised btn-info float-right btn-sm"},"Follow")))})))},n.state={users:[],error:"",open:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(e,t){return fetch("".concat(I,"/user/findpeople/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(w().user._id,w().message).then((function(t){t.error&&console.log(t.error),e.setState({users:t})}))}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.open,n=e.follow_message;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Find People"),r.a.createElement("div",null,a&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("p",null,n))),this.renderUsers(t))}}]),a}(n.Component),W=a(27),$=function(e){var t=e.component,a=Object(W.a)(e,["component"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return w()?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},K=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).isValid=function(){var e=n.state,t=e.title,a=e.body;return e.fileSize>1e4?n.setState({error:"File should be less than 100kb.",loading:!1}):0!==t.length&&0!==a.length||n.setState({error:"All fields are required!",loading:!1})},n.handleChange=function(e){return function(t){var a;n.setState({error:""});var r="photo"===e?t.target.files[0]:t.target.value,o="photo"===e?t.target.files[0].size:0;n.post_data.set(e,r),n.setState((a={},Object(P.a)(a,e,r),Object(P.a)(a,"fileSize",o),a))}},n.clickSubmit=function(e){e.preventDefault();var t=w().user._id,a=w().message;n.setState({loading:!0}),n.isValid()&&function(e,t,a){return fetch("".concat(p,"/post/new/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t,a,n.post_data).then((function(e){if(e.error)return n.setState({error:e.error});n.setState({loading:!1,redirectToProfile:!0,body:"",title:"",photo:""})}))},n.newPostForm=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var o=[].concat(t),c=o[0],l=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Post Photo"),r.a.createElement("input",{onChange:n.handleChange("photo"),type:"file",className:"form-control",accept:"image/*"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Title"),r.a.createElement("input",{onChange:n.handleChange("title"),type:"text",className:"form-control",value:c||"",autoComplete:"username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Body"),r.a.createElement("textarea",{onChange:n.handleChange("body"),type:"text",className:"form-control",value:l||""})),r.a.createElement("button",{className:"btn btn-raised btn-primary"},"Create Post"))},n.state={title:"",body:"",photo:"",error:"",fileSize:"",user:{},loading:!1,redirectToProfile:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.post_data=new FormData,this.setState({user:w().user})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.body,n=e.user,o=e.loading,c=e.error;return e.redirectToProfile?r.a.createElement(s.a,{to:"/user/".concat(n._id)}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"mt-5 mb-5"},"Create a new Post"),r.a.createElement("form",{onSubmit:this.clickSubmit},r.a.createElement("div",{className:"alert alert-warning",style:{display:c?"block":"none"}},c),o?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):"",this.newPostForm(t,a)))}}]),a}(n.Component),Q=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={text:"",error:""},e.handleChange=function(t){e.setState({text:t.target.value,error:""})},e.isValid=function(){var t=e.state.text;return!(!t.length>0||t.length>150)||(e.setState({error:"Comment should be between 0 and 150 characters"}),!1)},e.deleteComment=function(t){if(window.confirm("Do you want to delete this post?")){var a=w().user._id,n=w().message,r=e.props.postId;v(a,n,r,t).then((function(t){t.error&&console.log(t.error),e.props.updateComments(t.comments)}))}return!1},e.addComment=function(t){if(t.preventDefault(),e.isValid()){var a=w().user._id,n=w().message,r=e.props.postId;E(a,n,r,{text:e.state.text}).then((function(t){t.error&&console.log(t.error),e.setState({text:""}),e.props.updateComments(t.comments)}))}},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.comments,a=this.state.error;return r.a.createElement("div",null,r.a.createElement("h2",{className:"mt-5 mb-5"},"Leave a comment"),r.a.createElement("form",{onSubmit:this.addComment},r.a.createElement("div",{className:"alert alert-warning",style:{display:a?"block":"none"}},a),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",onChange:this.handleChange,value:this.state.text,placeholder:"Leave a comment"}),r.a.createElement("button",{type:"submit",className:"btn btn-raised btn-sm btn-primary mt-2"},"Send"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-md-8 col-md-offset-2"},r.a.createElement("h3",{className:"text-primary"},t.length," Comments"),r.a.createElement("hr",null),t.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("div",null,r.a.createElement(l.b,{to:"/user/".concat(t.postedBy._id)},r.a.createElement("img",{style:{borderRadius:"100%"},className:"img-thumbnail float-left mr-2",height:"30px",width:"30px",onError:function(e){return e.target.src="".concat(U.a)},src:"".concat(N,"/user/photo/").concat(t.postedBy._id),alt:t.postedBy.name})),r.a.createElement("div",null,r.a.createElement("p",{className:"lead"},t.postedBy.name),r.a.createElement("p",null,t.text)),w().user&&w().user._id===t.postedBy._id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(){return e.deleteComment(t)},className:"text-warning"},"Remove"))))}))))}}]),a}(n.Component),X=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={post:"",likes:0,deleted:!1,like:!1,redirectToSignin:!1,comments:[]},e.deletePost=function(){var t=e.props.match.params.postId,a=w().message;return!!window.confirm("Do you want to delete this post?")&&f(t,a).then((function(t){t.error&&console.log(t.error),e.setState({deleted:!0})}))},e.updateComments=function(t){e.setState({comments:t})},e.likeToggle=function(){var t=e.state.like?g:b,a=w().user._id,n=e.state.post._id;t(a,w().message,n).then((function(t){t.error&&console.log(t.error),e.setState({like:!e.state.like,likes:t.likes.length})}))},e.renderPost=function(t){var a=t.postedBy?"/user/".concat(t.postedBy._id):"",n=t.postedBy?t.postedBy.name:"unknown",o=e.state,c=o.like,s=o.likes;return r.a.createElement("div",{className:"card-body"},r.a.createElement("img",{src:"".concat(N,"/post/photo/").concat(t._id),alt:t.title,onError:function(e){return e.target.src="".concat(S.a)},className:"img-thumbnail mb-3",style:{height:"300px",width:"100%",objectFit:"cover"}}),c?r.a.createElement("h3",{onClick:e.likeToggle},r.a.createElement("i",{className:"fa fa-thumbs-up text-success bg-dark",style:{padding:"10px",borderRadius:"100%",marginRight:"4px"}}),s," Likes"):r.a.createElement("h3",{onClick:e.likeToggle},r.a.createElement("i",{className:"fa fa-thumbs-up text-warning bg-dark",style:{padding:"10px",borderRadius:"100%",marginRight:"4px"}}),s," Likes"),r.a.createElement("p",{className:"card-text"},t.body),r.a.createElement("br",null),r.a.createElement("p",{className:"font-italic mark"},"Posted by",r.a.createElement(l.b,{to:"/user/".concat(a)}," ",n," "),"on ",new Date(t.created).toDateString()),r.a.createElement("div",{className:"d-inline-block"},r.a.createElement(l.b,{to:"/",className:"btn btn-raised btn-sm btn-primary mr-5"},"Back to Posts"),w().user&&w().user._id===e.state.post.postedBy._id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/post/edit/".concat(t._id),className:"btn btn-raised btn-sm btn-warning mr-5"},"Update Post"),r.a.createElement("button",{onClick:e.deletePost,className:"btn btn-raised btn-sm btn-warning mr-5"},"Delete Post"))))},e.checkLike=function(t){if(!w())return e.setState({redirectToSignin:!0});var a=w().user._id;return-1!==t.indexOf(a)},e.componentDidMount=function(){var t=e.props.match.params.postId;h(t).then((function(t){t.error&&console.log(t.error),e.setState({post:t,likes:t.likes.length,like:e.checkLike(t.likes),comments:t.comments}),console.log(t.comments)}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.post,a=e.deleted,n=e.redirectToSignin,o=e.comments;return a?r.a.createElement(s.a,{to:"/"}):n?r.a.createElement(s.a,{to:"/signin"}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"display-2 mt-5 mb-5",style:{textAlign:"center"}},t.title),t?this.renderPost(t):r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading")),r.a.createElement(Q,{postId:t._id,comments:o.reverse(),updateComments:this.updateComments}))}}]),a}(n.Component),Y=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).init=function(t){h(t).then((function(t){if(t.error)return e.setState({redirectToPost:!0});e.setState({id:t._id,title:t.title,body:t.body,error:"",loading:!1})}))},e.handleChange=function(t){return function(a){var n;e.setState({error:""});var r="photo"===t?a.target.files[0]:a.target.value,o="photo"===t?a.target.files[0].size:0;e.postData.set(t,r),e.setState((n={},Object(P.a)(n,t,r),Object(P.a)(n,"fileSize",o),n))}},e.isValid=function(){var t=e.state,a=t.title,n=t.body;return t.fileSize>1e4?e.setState({error:"File should be less than 100kb.",loading:!1}):0!==a.length&&0!==n.length||e.setState({error:"All fields are required!",loading:!1})},e.clickSubmit=function(t){t.preventDefault();var a=e.state.id,n=w().message;e.setState({loading:!0}),e.isValid()&&function(e,t,a){return fetch("".concat(p,"/post/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(a,n,e.postData).then((function(t){if(t.error)return e.setState({error:t.error});e.setState({redirectToProfile:!0,loading:!1,title:"",body:""})}))},e.editForm=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var o=[].concat(a),c=o[0],l=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Profile Photo"),r.a.createElement("input",{onChange:e.handleChange("photo"),type:"file",className:"form-control",accept:"image/*"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Title"),r.a.createElement("input",{onChange:e.handleChange("title"),type:"text",className:"form-control",value:c||"",autoComplete:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Body"),r.a.createElement("textarea",{onChange:e.handleChange("body"),type:"text",className:"form-control",value:l||""})),r.a.createElement("button",{className:"btn btn-raised btn-primary"},"Update"))},e.state={id:"",title:"",body:"",photo:"",fileSize:"",redirectToPost:!1},e.postData=new FormData,e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.postId;this.init(e)}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.title,n=e.body,o=e.redirectToPost,c=e.loading,l=e.error;return o?r.a.createElement(s.a,{to:"/user/".concat(w().user._id)}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.clickSubmit},r.a.createElement("div",{className:"alert alert-warning",style:{display:l?"block":"none"}},l),c?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h2",null,"Loading...")):"",r.a.createElement("h2",{className:"mt-5 mb-5"},a),r.a.createElement("img",{style:{height:"200px",width:"auto",borderRadius:"100%"},className:"img-thumbnail",src:"".concat(N,"/post/photo/").concat(t,"?").concat((new Date).getTime()),onError:function(e){return e.target.src="".concat(S.a)},alt:a}),this.editForm(a,n)))}}]),a}(n.Component),Z=function(){return r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:C}),r.a.createElement($,{exact:!0,path:"/post/create",component:K}),r.a.createElement(s.b,{exact:!0,path:"/post/:postId",component:X}),r.a.createElement(s.b,{exact:!0,path:"/users",component:G}),r.a.createElement(s.b,{exact:!0,path:"/signup",component:_}),r.a.createElement(s.b,{exact:!0,path:"/signin",component:A}),r.a.createElement($,{exact:!0,path:"/findpeople",component:H}),r.a.createElement($,{exact:!0,path:"/user/edit/:userId",component:q}),r.a.createElement($,{exact:!0,path:"/user/:userId",component:M}),r.a.createElement($,{exact:!0,path:"/post/edit/:postId",component:Y}),r.a.createElement(s.b,{path:"*",component:function(){return r.a.createElement("h1",null,"Acesso Negado!")}})))},ee=function(){return r.a.createElement(l.a,null,r.a.createElement(Z,null))};c.a.render(r.a.createElement(ee,null),document.getElementById("root"))},7:function(e,t,a){e.exports=a.p+"static/media/avatar_profile.64a211b3.png"}},[[28,1,2]]]);
//# sourceMappingURL=main.2383ffe7.chunk.js.map